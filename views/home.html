<!doctype html>
<html lang="es" data-bs-theme="auto">
  <head>
    <script src="js/color-modes.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Inicio - Mi Tiendita</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">

    <style>
      body {
        background: linear-gradient(to right, #15008f, #acd0f6); 
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
      }
      
      .container {
        background-color: #ffffff; 
        border-radius: 8px; 
        padding: 20px; 
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); 
        max-width: 1000px; 
        margin: 0 auto; 
      }

      .content {
        padding: 20px;
      }

      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .b-example-divider {
        width: 100%;
        height: 3rem;
        background-color: rgba(0, 0, 0, .1);
        border: solid rgba(0, 0, 0, .15);
        border-width: 1px 0;
        box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
      }

      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }

      .bi {
        vertical-align: -.125em;
        fill: currentColor;
      }

      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }

      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }

      .btn-bd-primary {
        --bd-violet-bg: #712cf9;
        --bd-violet-rgb: 112.520718, 44.062154, 249.437846;

        --bs-btn-font-weight: 600;
        --bs-btn-color: var(--bs-white);
        --bs-btn-bg: var(--bd-violet-bg);
        --bs-btn-border-color: var(--bd-violet-bg);
        --bs-btn-hover-color: var(--bs-white);
        --bs-btn-hover-bg: #6528e0;
        --bs-btn-hover-border-color: #6528e0;
        --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
        --bs-btn-active-color: var(--bs-btn-hover-color);
        --bs-btn-active-bg: #5a23c8;
        --bs-btn-active-border-color: #5a23c8;
      }

      .bd-mode-toggle {
        z-index: 1500;
      }

      .bd-mode-toggle .dropdown-menu .active .bi {
        display: block !important;
      }

      .btn-custom-green {
        background-color: rgb(2, 0, 128);
        border-color: rgb(15, 0, 128);
        color: white;
      }

      .btn-custom-green:hover {
        background-color: rgb(48, 0, 100);
        border-color: rgb(48, 0, 100);
      }
      
      .section-title {
        font-size: 1.1rem;
        font-weight: 600;
        margin: 20px 0 15px 0;
        padding-bottom: 8px;
        border-bottom: 1px solid #e9ecef;
        color: #15008f;
      }
      
      .welcome-header {
        text-align: center;
        margin-bottom: 30px;
        color: #15008f !important;

      }
      
      .feature-card {
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        transition: transform 0.3s, box-shadow 0.3s;
      }
      
      .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }
      
      .feature-icon {
        font-size: 2.5rem;
        color: #15008f;
        margin-bottom: 15px;
      }
      
      .stats-card {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        margin-bottom: 20px;
      }
      
      .stats-number {
        font-size: 2rem;
        font-weight: bold;
        color: #15008f;
      }
      
      .stats-label {
        font-size: 0.9rem;
        color: #6c757d;
      }
      
      .quick-action {
        background-color: #f0f5ff;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        text-align: center;
        transition: background-color 0.3s;
      }
      
      .quick-action:hover {
        background-color: #e0ebff;
        cursor: pointer;
      }
      
      .user-info {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
      }
      
      .notification-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: #dc3545;
        color: white;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        font-size: 0.7rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      

      .lead {
        color: #000000 !important;
      }

      /* Estilos para Blockchain */
      .blockchain-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        color: white;
      }
      
      .blockchain-card {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        backdrop-filter: blur(10px);
      }
      
      .blockchain-badge {
        background-color: #17a2b8;
        color: white;
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 0.8rem;
        margin-right: 10px;
      }
      
      .hash-code {
        font-family: 'Courier New', monospace;
        background-color: rgba(0, 0, 0, 0.3);
        padding: 8px;
        border-radius: 5px;
        font-size: 0.8rem;
        word-break: break-all;
        margin-top: 5px;
      }
      
      .blockchain-btn {
        background-color: #28a745;
        border-color: #28a745;
        color: white;
        margin: 5px;
      }
      
      .blockchain-btn:hover {
        background-color: #218838;
        border-color: #1e7e34;
      }
    </style>

  </head>
  <body>
    <div class="content">
      <div class="container">
        <main>
          <div class="py-5">
            <div class="welcome-header">
              <img class="bd-placeholder-img rounded-circle" src="img/logo_tienda.png" alt="Logo Mi Tiendita" width="150" height="150">
              <h2>¬°Bienvenido a Mi Tiendita!</h2>
              <p class="lead">Hola, estamos encantados de tenerte aqu√≠.</p>
            </div>
            

            <div class="blockchain-section">
              <div class="row align-items-center">
                <div class="col-md-8">
                  <h4>üîó Tecnolog√≠a Blockchain</h4>
                  <p class="mb-0">Tu informaci√≥n est√° protegida con tecnolog√≠a blockchain para m√°xima seguridad e inmutabilidad.</p>
                </div>
                <div class="col-md-4 text-end">
                  <button class="btn blockchain-btn" onclick="verBlockchain()">
                    üìä Ver Blockchain
                  </button>
                  <button class="btn blockchain-btn" onclick="verificarIntegridad()">
                    üîç Verificar Integridad
                  </button>
                </div>
              </div>
              
              <div class="row mt-3" id="blockchain-stats">
                <div class="col-md-3">
                  <div class="blockchain-card text-center">
                    <div class="stats-number" id="block-count">0</div>
                    <div class="stats-label">Bloques en Cadena</div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="blockchain-card text-center">
                    <div class="stats-number" id="chain-status">‚úÖ</div>
                    <div class="stats-label">Estado de la Cadena</div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="blockchain-card">
                    <div class="stats-label">√öltimo Hash</div>
                    <div class="hash-code" id="last-hash">Cargando...</div>
                  </div>
                </div>
              </div>
              
              <div id="blockchain-data" class="mt-3" style="display: none;">
                <!-- Aqu√≠ se mostrar√°n los datos de la blockchain -->
              </div>
            </div>
            <!-- FIN SECCI√ìN BLOCKCHAIN -->
            
            <div class="row">
              <div class="col-md-8">
                <div class="section-title">Resumen de tu Negocio</div>
                
                <div class="row">
                  <div class="col-md-4">
                    <div class="stats-card">
                      <div class="stats-number">$8,450</div>
                      <div class="stats-label">Ventas del Mes</div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="stats-card">
                      <div class="stats-number">124</div>
                      <div class="stats-label">Clientes Activos</div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="stats-card">
                      <div class="stats-number">87%</div>
                      <div class="stats-label">Inventario Disponible</div>
                    </div>
                  </div>
                </div>
                
                <div class="section-title">Notificaciones</div>
                
                <div class="list-group">
                  <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    <div>
                      <div class="fw-bold">Inventario Bajo</div>
                      <div class="text-muted">5 productos con stock bajo</div>
                    </div>
                    <span class="badge bg-danger rounded-pill">5</span>
                  </a>
                  <a href="#" class="list-group-item list-group-item-action">
                    <div class="fw-bold">Nueva Actualizaci√≥n</div>
                    <div class="text-muted">Disponible nueva versi√≥n de la app</div>
                  </a>
                  <a href="#" class="list-group-item list-group-item-action">
                    <div class="fw-bold">Recordatorio de Pago</div>
                    <div class="text-muted">Tu suscripci√≥n vence en 5 d√≠as</div>
                  </a>
                </div>
              </div>
              
              
                <div class="user-info">
                  <h6>Informaci√≥n de Seguridad</h6>
                  <p class="small text-muted mb-2">
                    <span class="badge bg-success">üîí HTTPS Activo</span>
                    <span class="badge bg-info">‚õìÔ∏è Blockchain</span>
                  </p>
                  <p class="small text-muted">Tu conexi√≥n est√° protegida con cifrado SSL y tecnolog√≠a blockchain.</p>
                </div>
              </div>
            </div> 
          </div>
        </main>
      </div>
    </div>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/checkout.js"></script>
    
    <!-- Script para Blockchain -->
    <script>
      // Cargar estad√≠sticas de blockchain al cargar la p√°gina
      document.addEventListener('DOMContentLoaded', function() {
        cargarEstadisticasBlockchain();
      });

      async function cargarEstadisticasBlockchain() {
        try {
          const response = await fetch('/blockchain');
          const data = await response.json();
          
          document.getElementById('block-count').textContent = data.longitud;
          document.getElementById('chain-status').textContent = data.valida ? '‚úÖ' : '‚ùå';
          document.getElementById('last-hash').textContent = data.cadena[data.cadena.length - 1]?.hash || 'N/A';
        } catch (error) {
          console.error('Error cargando blockchain:', error);
        }
      }

      async function verBlockchain() {
        try {
          const response = await fetch('/blockchain');
          const data = await response.json();
          
          const blockchainData = document.getElementById('blockchain-data');
          blockchainData.style.display = 'block';
          blockchainData.innerHTML = `
            <div class="blockchain-card">
              <h5>üìã Cadena de Bloques Completa</h5>
              <div class="mt-3">
                ${data.cadena.map((block, index) => `
                  <div class="blockchain-card mb-2">
                    <div class="d-flex justify-content-between">
                      <span class="blockchain-badge">Bloque #${index}</span>
                      <small>${new Date(block.timestamp).toLocaleString()}</small>
                    </div>
                    <div class="hash-code small">
                      <strong>Hash:</strong> ${block.hash}<br>
                      <strong>Hash Anterior:</strong> ${block.previousHash}<br>
                      <strong>Datos:</strong> ${JSON.stringify(block.data)}
                    </div>
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        } catch (error) {
          alert('Error al cargar la blockchain: ' + error.message);
        }
      }

      async function verificarIntegridad() {
        try {
          const response = await fetch('/verificar');
          const data = await response.json();
          
          if (data.integridad.includes('V√ÅLIDA')) {
            alert('‚úÖ ' + data.integridad + '\n\nBloques: ' + data.bloques + '\n√öltimo Hash: ' + data.ultimoHash.substring(0, 20) + '...');
          } else {
            alert('‚ùå ' + data.integridad + '\n\n¬°La integridad de la cadena ha sido comprometida!');
          }
          
          // Actualizar estad√≠sticas
          cargarEstadisticasBlockchain();
        } catch (error) {
          alert('Error verificando integridad: ' + error.message);
        }
      }
    </script>
  
  </body>
</html>